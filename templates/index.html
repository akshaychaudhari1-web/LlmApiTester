<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Python IDE for OpenRouter APIs</title>
    
    <!-- Bootstrap CSS with Replit Dark Theme -->
    <link href="https://cdn.replit.com/agent/bootstrap-agent-dark-theme.min.css" rel="stylesheet">
    
    <!-- Monaco Editor -->
    <script src="https://unpkg.com/monaco-editor@0.44.0/min/vs/loader.js"></script>
    
    <!-- Feather Icons -->
    <script src="https://unpkg.com/feather-icons"></script>
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/custom.css') }}">
</head>
<body>
    <div class="container-fluid h-100">
        <!-- Header -->
        <nav class="navbar navbar-expand-lg navbar-dark border-bottom">
            <div class="container-fluid">
                <span class="navbar-brand mb-0 h1">
                    <i data-feather="code" class="me-2"></i>
                    Python IDE for OpenRouter
                </span>
                <div class="d-flex">
                    <button class="btn btn-outline-secondary me-2" type="button" data-bs-toggle="modal" data-bs-target="#settingsModal">
                        <i data-feather="settings" class="me-1"></i>
                        Settings
                    </button>
                    <button class="btn btn-outline-secondary" type="button" data-bs-toggle="modal" data-bs-target="#snippetsModal">
                        <i data-feather="folder" class="me-1"></i>
                        Snippets
                    </button>
                </div>
            </div>
        </nav>

        <!-- Main Content -->
        <div class="row g-3 p-3 h-100">
            <!-- Left Panel - Code Editor -->
            <div class="col-lg-6">
                <div class="card h-100">
                    <div class="card-header d-flex justify-content-between align-items-center">
                        <h6 class="mb-0">
                            <i data-feather="edit-3" class="me-2"></i>
                            Python Code Editor
                        </h6>
                        <div class="btn-group btn-group-sm">
                            <button id="runCodeBtn" class="btn btn-success" type="button">
                                <i data-feather="play" class="me-1"></i>
                                Run Code
                            </button>
                            <button id="saveCodeBtn" class="btn btn-outline-secondary" type="button">
                                <i data-feather="save" class="me-1"></i>
                                Save
                            </button>
                            <button id="clearCodeBtn" class="btn btn-outline-secondary" type="button">
                                <i data-feather="trash-2" class="me-1"></i>
                                Clear
                            </button>
                        </div>
                    </div>
                    <div class="card-body p-0">
                        <div id="editor" class="h-100"></div>
                    </div>
                </div>
            </div>

            <!-- Right Panel - Output and API -->
            <div class="col-lg-6">
                <div class="row g-3 h-100">
                    <!-- Console Output -->
                    <div class="col-12">
                        <div class="card h-100">
                            <div class="card-header d-flex justify-content-between align-items-center">
                                <h6 class="mb-0">
                                    <i data-feather="terminal" class="me-2"></i>
                                    Console Output
                                </h6>
                                <button id="clearOutputBtn" class="btn btn-outline-secondary btn-sm" type="button">
                                    <i data-feather="x" class="me-1"></i>
                                    Clear
                                </button>
                            </div>
                            <div class="card-body">
                                <pre id="consoleOutput" class="bg-dark text-light p-3 rounded h-100 overflow-auto"></pre>
                            </div>
                        </div>
                    </div>

                    <!-- OpenRouter API Test -->
                    <div class="col-12">
                        <div class="card h-100">
                            <div class="card-header">
                                <h6 class="mb-0">
                                    <i data-feather="cloud" class="me-2"></i>
                                    OpenRouter API Test
                                </h6>
                            </div>
                            <div class="card-body">
                                <div class="row g-2 mb-3">
                                    <div class="col-md-8">
                                        <input type="text" id="promptInput" class="form-control" placeholder="Enter your prompt here..." value="Hello! Can you help me write Python code?">
                                    </div>
                                    <div class="col-md-4">
                                        <button id="testApiBtn" class="btn btn-primary w-100" type="button">
                                            <i data-feather="send" class="me-1"></i>
                                            Test API
                                        </button>
                                    </div>
                                </div>
                                <div id="apiResponse" class="bg-dark text-light p-3 rounded overflow-auto" style="min-height: 200px;">
                                    <em class="text-muted">API response will appear here...</em>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div class="modal fade" id="settingsModal" tabindex="-1" aria-labelledby="settingsModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="settingsModalLabel">
                        <i data-feather="settings" class="me-2"></i>
                        OpenRouter Settings
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="mb-3">
                        <label for="apiKeyInput" class="form-label">OpenRouter API Key</label>
                        <input type="password" class="form-control" id="apiKeyInput" placeholder="Enter your OpenRouter API key">
                        <div class="form-text">You can get your API key from <a href="https://openrouter.ai/keys" target="_blank">OpenRouter Dashboard</a></div>
                    </div>
                    <div class="mb-3">
                        <label for="modelSelect" class="form-label">Model</label>
                        <select class="form-select" id="modelSelect">
                            <option value="openai/gpt-3.5-turbo">GPT-3.5 Turbo</option>
                            <option value="openai/gpt-4">GPT-4</option>
                            <option value="openai/gpt-4-turbo">GPT-4 Turbo</option>
                            <option value="anthropic/claude-3-haiku">Claude 3 Haiku</option>
                            <option value="anthropic/claude-3-sonnet">Claude 3 Sonnet</option>
                            <option value="anthropic/claude-3-opus">Claude 3 Opus</option>
                            <option value="meta-llama/llama-2-70b-chat">Llama 2 70B</option>
                            <option value="google/gemma-7b-it">Gemma 7B</option>
                        </select>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" id="saveSettingsBtn">Save Settings</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Snippets Modal -->
    <div class="modal fade" id="snippetsModal" tabindex="-1" aria-labelledby="snippetsModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="snippetsModalLabel">
                        <i data-feather="folder" class="me-2"></i>
                        Code Snippets
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div id="snippetsList" class="list-group">
                        <!-- Snippets will be loaded here -->
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Save Snippet Modal -->
    <div class="modal fade" id="saveSnippetModal" tabindex="-1" aria-labelledby="saveSnippetModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="saveSnippetModalLabel">
                        <i data-feather="save" class="me-2"></i>
                        Save Code Snippet
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="mb-3">
                        <label for="snippetNameInput" class="form-label">Snippet Name</label>
                        <input type="text" class="form-control" id="snippetNameInput" placeholder="Enter a name for your snippet">
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" id="confirmSaveSnippetBtn">Save Snippet</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Custom JS -->
    <script src="{{ url_for('static', filename='js/editor.js') }}"></script>
    
    <script>
        // Initialize Feather icons
        feather.replace();
    </script>
</body>
</html>
